# ПО для чтения/записи блоков памяти контроллера Segnetics SMH 2G

## Описание запросов/ответов между ПК и Arduino

Инициатором обмена всегда является ПК.

### Структура запроса
Поле | Обозначение | Длина (байт)
-|-|-
Код команды | Code | 1
Параметр | Param | 2
Полезная нагрузка | Payload | *Переменная*

### Запросы
Команда | Code | Param | Payload
- | - | - | -
Выбор микросхемы | 'C' (0x43) | Номер микросхемы (\*) | *Нет*
Установка адреса | 'A' (0x41) | Адрес в EEPROM | *Нет*
Чтение из EEPROM | 'R' (0x52) | Длина данных (\*\*) | Буфер для данных
Запись в EEPROM | 'W' (0x57)  | Длина данных (\*\*) | Данные для записи

(\*) *Допустимы значения [0 .. 3]*

(\*\*) *Допустимая длина данных [1 .. 255]*

## Исправление стандартной библиотеки

Для корректной работы Arduino скетча необходимо исправить следующие определения:

Файл | Определение | Новое значение
-|-|-
Wire.h | BUFFER_LENGTH | 192
twi.h | TWI_BUFFER_LENGTH | 192
